コミットを作成する前に、以下の品質チェックを順番に実行してください。

## 事前チェック

以下を**並列**で実行し、すべて通ることを確認してください。

1. `npm run typecheck` — 型エラーがないこと
2. `npm run lint` — lint / format エラーがないこと
3. `npm run test` — テストがすべてパスすること

いずれかが失敗した場合はコミットを中止し、解決してから再度チェックを実行してください。

### 解決時の注意点
- 型エラーはコードの品質に直結するため、必ず解決してください
  - 型アセーションや `@ts-ignore` を安易に使用しないこと
- lint / format エラーはコードの可読性に影響するため、必ず修正してください
  - ルールに従うことでコードの一貫性が保たれ、チーム全体の生産性が向上します
  - ignore コメントは必要最小限にとどめ、理由を明記してください
- テストが失敗する場合は、コードのロジックに問題がある可能性が高いため、必ず修正してください
  - テストケースを追加して、問題の再発を防止することも検討してください
  - 結果を捻じ曲げるような修正は避け、根本的な問題を解決することを優先してください

## ステージング前の確認

- `git diff` と `git status` でステージ対象を確認する
- `console.log` が残っていないことを確認する（デバッグ用は作業中のみ許可）
- `.env` やクレデンシャル系ファイルがステージに含まれていないことを確認する

## コミット作成

事前チェックがすべて通った場合のみ、以下の方針でコミットを作成してください。

- 変更を意味単位（機能追加、バグ修正、リファクタリング等）に分割し、それぞれ個別のコミットにする
- 無関係な変更を1つのコミットに混ぜない
- コミットメッセージは英語で、`type: description` 形式にする
  - type: `feat` / `fix` / `refactor` / `test` / `docs` / `chore`
  - 例: `feat: add NAR file validation`
- `git -C`は利用しないで、必ずプロジェクトルートでコミットを実行すること
